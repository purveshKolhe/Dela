# Dela P2P File Sharing

<p align="center">
  <img src="image.png" alt="Dela Logo" width="120">
</p>

<h3 align="center">A secure and efficient peer-to-peer file sharing application built with Node.js for relay services and Python Flask for QR code generation.</h3>

<p align="center">
    <img src="https://img.shields.io/badge/build-passing-brightgreen" alt="Build Status">
    <img src="https://img.shields.io/badge/license-MIT-blue" alt="License">
    <img src="https://img.shields.io/badge/version-1.0.0-blue" alt="Version">
</p>

## Table of Contents

*   [About The Project](#about-the-project)
*   [Key Features](#key-features)
*   [Tech Stack](#tech-stack)
*   [Architecture Diagram](#architecture-diagram)
*   [Getting Started](#getting-started)
    *   [Prerequisites](#prerequisites)
    *   [Installation](#installation)
*   [Usage](#usage)
*   [API Endpoints](#api-endpoints)
*   [Environment Variables](#environment-variables)
*   [Deployment](#deployment)
*   [License](#license)
*   [Contact](#contact)

## About The Project

Dela P2P File Sharing is a web-based application designed to facilitate secure and efficient file transfers between two peers without directly exposing their IP addresses. It leverages a Node.js WebSocket relay server to broker connections and relay messages and file chunks, ensuring a smooth and reliable transfer process. Additionally, a Python Flask service provides QR code generation capabilities, simplifying the connection process by allowing users to scan a QR code to join a sharing session. This project aims to provide a user-friendly and robust solution for direct file sharing.

## Key Features

*   **Peer-to-Peer File Transfer:** Securely share files directly between two clients.
*   **WebSocket Relay:** Utilizes a Node.js relay server for connection brokering and data relay.
*   **QR Code Connection:** Easily establish connections by scanning a QR code generated by the Flask service.
*   **Chat Functionality:** Integrated chat for communication between peers during file transfer.
*   **File Chunking:** Efficiently handles large file transfers by splitting them into manageable chunks.
*   **Cross-platform:** Web-based interface accessible from any modern browser.

## Tech Stack

*   **Frontend:**
    *   HTML5
    *   CSS3
    *   JavaScript
*   **Backend (Node.js Relay Server):**
    *   Node.js
    *   [Express.js](https://expressjs.com/)
    *   [ws](https://www.npmjs.com/package/ws) (WebSocket library)
    *   [CORS](https://www.npmjs.com/package/cors)
*   **Backend (Python Flask QR Service):**
    *   Python
    *   [Flask](https://flask.palletsprojects.com/)
    *   [Flask-CORS](https://flask-cors.readthedocs.io/en/latest/)
    *   [qrcode](https://pypi.org/project/qrcode/)
    *   [Pillow](https://python-pillow.org/)

## Architecture Diagram

```mermaid
graph TD
    A[Client 1 (Browser)] -- WebSocket --> B(Node.js Relay Server)
    B -- WebSocket --> C[Client 2 (Browser)]
    D[Client 1 (Browser)] -- HTTP POST --> E(Python Flask QR Service)
    E -- QR Image --> D
    C -- HTTP POST --> E
    E -- QR Image --> C
```

## Getting Started

To get a local copy up and running, follow these simple steps.

### Prerequisites

Make sure you have the following installed on your system:

*   **Node.js** (LTS version recommended)
*   **npm** (comes with Node.js)
*   **Python 3.x**
*   **pip** (comes with Python 3.x)

### Installation

1.  **Clone the repository:**
    ```bash
    git clone https://github.com/your-username/dela-p2p-sharing.git
    cd dela-p2p-sharing
    ```

2.  **Install Node.js dependencies:**
    ```bash
    cd services/relay-server
    npm install
    cd ../.. 
    ```

3.  **Install Python dependencies:**
    ```bash
    cd services/qr-service
    pip install -r requirements.txt
    cd ../..
    ```

## Usage

To run both services locally:

1.  **Start the Node.js Relay Server:**
    ```bash
    cd services/relay-server
    npm start
    ```
    The server will typically run on `http://localhost:3000`.

2.  **Start the Python Flask QR Service (in a separate terminal):**
    ```bash
    cd services/qr-service
    python qr_server.py
    ```
    The server will typically run on `http://localhost:5000`.

3.  **Access the Web Application:**
    Open your web browser and navigate to `http://localhost:3000`.

    *   **To Host a Session:** Click "Create Room" (or similar) to generate a connection code and QR code.
    *   **To Join a Session:** Enter the connection code or scan the QR code provided by the host.

## API Endpoints

### Node.js Relay Server

The Node.js server primarily handles WebSocket connections. The main HTTP endpoint is for serving the frontend.

| Method | URL     | Description                        |
| :----- | :------ | :--------------------------------- |
| GET    | `/`     | Serves the main `index.html` file. |

WebSocket communication types:
*   `create-room`: Client requests to create a new sharing room.
*   `join-room`: Client requests to join an existing sharing room.
*   `chat-message`: Client sends a chat message to the peer.
*   `file-info`: Client sends metadata about a file to be transferred.
*   `file-chunk`: Client sends a chunk of file data.
*   `file-complete`: Client signals completion of file transfer.

### Python Flask QR Service

| Method | URL            | Description                            | Example Request (JSON)                | Example Response (JSON)                                |
| :----- | :------------- | :------------------------------------- | :------------------------------------ | :----------------------------------------------------- |
| POST   | `/generate_qr` | Generates a QR code from provided text.| `{"text": "your_connection_code"}` | `{"success": true, "image": "data:image/png;base64,..."}` |
| GET    | `/health`      | Checks the health of the QR service.   | (None)                                | `{"status": "healthy", "service": "QR Code Generator"}` |

## Environment Variables

### Node.js Relay Server (`services/relay-server/.env`)

Create a file named `.env` in the `services/relay-server` directory with the following content:

```
PORT=3000
# Optionally, you might add other variables here if needed, e.g., for security or logging.
```

### Python Flask QR Service (`services/qr-service/.env`)

For the Flask service, the port is usually set directly in the script or via command-line arguments. If you need to externalize it, you would typically use a tool like `python-dotenv` or set it in the deployment environment. Create a `.env` file in `services/qr-service` for local development:
```
FLASK_RUN_PORT=5000
```
*(Note: Flask's `app.run` directly uses `port` argument in `qr_server.py`, so `FLASK_RUN_PORT` would require code modification or a different run command.)*

## Deployment

For detailed deployment instructions, please refer to [DEPLOYMENT.md](DEPLOYMENT.md).

## License

Distributed under the MIT License. See `LICENSE` for more information.

## Contact

Your Name - [Your Portfolio/GitHub Profile](https://github.com/your-username)
